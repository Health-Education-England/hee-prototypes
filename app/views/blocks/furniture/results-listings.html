{% extends "prototype-inner.html" %}

{% set page_url = 'results-listings' %}
{% set page_title = 'Results listings' %}

{% block pageTitle %}{{ page_title }} - Templates - NWP Prototype Kit{% endblock %}

{% block breadcrumbs %}
  {{
  breadcrumb({
    items: [
      {
        href: basePath + "/",
        text: "Home"
      },
      {
        href: basePath + "/blocks",
        text: "Blocks"
      }
    ],
    href: basePath + "/blocks/"+page_url,
    text: page_title
  })
  }}
{% endblock %}

{% block pageLeftbar %}
  {{ subnav({
    area: 'blocks',
    subarea: 'furniture'
  }) }}
{% endblock %}

{% block pageHeader %}
  <span class="nhsuk-caption-xl">Furniture</span>
  <h1>{{ page_title }}</h1>
  <p>Custom component to display a list of results, sort by and pagination (if required).</p>
  <p>The listing component uses the listingItem() macro to display each result.</p>
{% endblock %}

{% block pageContent %}

  <h3>Example</h3>
  {{ example({
    url: basePath + '/blocks/furniture/examples/' + page_url,
    height: '500'
  }) }}

  <hr />

  <h3>Macro (fullwidth item layout)</h3>
{{ highlight({
  html: '
{% set selectAttributes = {
    id: "sort",
    name: "sort",
    label: {
      text: "Sort by"
    },
    items: [
      {
        value: "newest",
        text: "Newest"
      },
      {
        value: "relevance",
        text: "Relevance"
      }
    ]
  } %}

  {% set submitAttributes = {
    text: "Update",
    classes: "hee-listing__filter__submit"
  } %}

  {% set items = [] %}
  {% for i in range(0, 10) -%}
    {% set item = {
      title: "Publication item #" + loop.index,
      href: "#",
      details: [
        {
          label: "Publications type:",
          value: "Briefing"
        },
        {
          label: "Publish date:",
          value: "07 September 2022"
        }
      ],
      summary: "Porttitor nulla pellentesque sit consequat, euismod sociis tempor, malesuada. Non senectus a placerat urna, nibh sed aliquam natoque. Diam gravida sit ullamcorper cras eu et mattis donec."
    } %}
    {% set items = (items.push(item), items) %}
  {% endfor %}

  {{ listingLayout({
    filter: {
      select: selectAttributes,
      submit: submitAttributes
    },
    results: items,
    emptyMessage: "No results",
    showPagination: true
  }) }}
  '
}) }}

<hr>

  <h2>Macro (half width item layout)</h2>
  {{ highlight({
    html: '
{% set selectAttributes = {
    id: "sort",
    name: "sort",
    label: {
      text: "Sort by"
    },
    items: [
      {
        value: "newest",
        text: "Newest"
      },
      {
        value: "relevance",
        text: "Relevance"
      }
    ]
  } %}

  {% set submitAttributes = {
    text: "Update",
    classes: "hee-listing__filter__submit"
  } %}

  {% set items = [] %}
  {% for i in range(0, 10) -%}
    {% set item = {
      title: "Publication item #" + loop.index,
      href: "#",
      details: [
        {
          label: "Publications type:",
          value: "Briefing"
        },
        {
          label: "Publish date:",
          value: "07 September 2022"
        }
      ],
      summary: "Porttitor nulla pellentesque sit consequat, euismod sociis tempor, malesuada. Non senectus a placerat urna, nibh sed aliquam natoque. Diam gravida sit ullamcorper cras eu et mattis donec."
    } %}
    {% set items = (items.push(item), items) %}
  {% endfor %}

  {{ listingLayout({
    filter: {
      select: selectAttributes,
      submit: submitAttributes
    },
    results: items,
    emptyMessage: "No results",
    showPagination: true,
    halfWidthResults: true
  }) }}
  '
  }) }}

{% endblock %}

{% block pageFooter %}{% endblock %}
